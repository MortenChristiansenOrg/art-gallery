id: collection-management
title: Collection Management
tags: [admin, crud]
status: implemented

description: |
  Admin can create, edit, delete, and reorder collections.
  Collections group related artworks together.

implementation:
  - src/pages/Admin.tsx#Admin
  - src/components/admin/CollectionForm.tsx#CollectionForm
  - src/components/admin/ImageCropper.tsx#ImageCropper
  - convex/collections.ts#create
  - convex/collections.ts#update
  - convex/collections.ts#remove

verification:
  unit:
    - path: src/components/admin/__tests__/CollectionForm.test.tsx
      status: implemented
  e2e:
    - path: e2e/admin.spec.ts#collection-crud
      status: implemented

flows:
  create-collection:
    - Admin clicks "Add Collection" button
    - Form modal opens
    - Admin enters name, slug, description
    - Admin optionally selects cover image from artworks or uploads custom
    - Admin uses crop tool to select cover region
    - Admin saves collection
    - New collection appears in list

  edit-collection:
    - Admin clicks edit button on collection
    - Form modal opens with existing data
    - Admin modifies fields
    - Admin can change cover image and re-crop
    - Admin saves changes

  delete-collection:
    - Admin clicks delete button
    - Confirmation dialog shown
    - On confirm, collection removed
    - Artworks in collection become unassigned

  cover-image-crop:
    - Admin selects artwork or uploads image
    - Crop overlay appears with draggable rectangle
    - Admin adjusts crop region (maintains 4:3 aspect ratio)
    - Admin clicks Apply Crop
    - Cropped image saved as cover

  cover-image-drag-drop:
    - Admin drags image file over upload zone
    - Drop zone shows visual feedback (border highlight)
    - Admin drops file
    - Image cropper opens automatically

interactions:
  - type: click
    element: add-collection-button
    action: Opens create form modal
  - type: click
    element: edit-button
    action: Opens edit form modal
  - type: click
    element: delete-button
    action: Shows confirmation dialog
  - type: drag
    element: crop-handle
    action: Resizes crop region
  - type: drop
    element: cover-upload-zone
    action: Opens cropper with dropped image
